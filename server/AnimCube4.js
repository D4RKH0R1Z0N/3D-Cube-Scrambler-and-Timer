"use strict";function AnimCube4(e){var t,r,n,o,a,f,l,i,u,c,s,h,v,d,g,m,b,M,w,p,k,L,y,A,R,T,S,D,F,B,E,x,I,U,P,C,W,X,Y,q,O,Q,N=[],Z=[],z=[],H=[],G=[],K=[],j=[[0,-1,0],[0,1,0],[0,0,-1],[0,0,1],[-1,0,0],[1,0,0]],J=[[-1,-1,-1],[1,-1,-1],[1,-1,1],[-1,-1,1],[-1,1,-1],[1,1,-1],[1,1,1],[-1,1,1]],V=[[0,1,2,3],[4,7,6,5],[0,4,5,1],[2,6,7,3],[0,3,7,4],[1,5,6,2]],$=[[0,3,2,1],[0,3,2,1],[3,2,1,0],[3,2,1,0],[0,3,2,1],[0,3,2,1]],_=[[2,5,3,4],[4,3,5,2],[4,1,5,0],[5,1,4,0],[0,3,1,2],[2,1,3,0]],ee=[1,1,-1,-1,-1,-1],te=[0,0,-1],re=[1,0,0],ne=[],oe=[],ae=[],fe=[],le=!0,ie=[],ue=[],ce=[],se=!0,he=-1,ve=6,de=12,ge=!0,me=!1,be=!1,Me=!1,we=!1,pe=0,ke=0,Le=0,ye=0,Ae=[3,2,0,5,1,4],Re=[[12,8,4,0,13,9,5,1,14,10,6,2,15,11,7,3],[3,7,11,15,2,6,10,14,1,5,9,13,0,4,8,12],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],[12,8,4,0,13,9,5,1,14,10,6,2,15,11,7,3],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]];function Te(){var e=De("config");null!=e?function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==t.readyState&&(200==t.status?function(e){for(var t=e.split("\n"),r=0;r<t.length;r++){var n=t[r].split("=");void 0!==n[1]&&(N[n[0]]=n[1].trim())}}(t.responseText):console.log("Error loading config file: "+e),Se())},t.open("GET",e,!0),t.send()}(e):Se()}function Se(){Z[0]=Ur(255,128,64),Z[1]=Ur(255,0,0),Z[2]=Ur(0,255,0),Z[3]=Ur(0,0,255),Z[4]=Ur(153,153,153),Z[5]=Ur(170,170,68),Z[6]=Ur(187,119,68),Z[7]=Ur(153,68,68),Z[8]=Ur(68,119,68),Z[9]=Ur(0,68,119),Z[10]=Ur(255,255,255),Z[11]=Ur(255,255,0),Z[12]=Ur(255,96,32),Z[13]=Ur(208,0,0),Z[14]=Ur(0,144,0),Z[15]=Ur(32,64,208),Z[16]=Ur(176,176,176),Z[17]=Ur(80,80,80),Z[18]=Ur(255,0,255),Z[19]=Ur(0,255,255),Z[20]=Ur(255,160,192),Z[21]=Ur(32,255,16),Z[22]=Ur(0,0,0),Z[23]=Ur(128,128,128);var e=De("bgcolor");if(t=null!=e&&6==e.length&&Cr(e)?"#"+e:"gray",e=De("butbgcolor"),o=null!=e&&6==e.length&&Cr(e)?"#"+e:t,null!=(e=De("colors")))for(var u=0;u<10&&u<e.length/6;u++)Cr(e.substring(6*u,6*u+6))&&(Z[u]="#"+e.substring(6*u,6*u+6));for(u=0;u<6;u++)for(var c=0;c<16;c++)z[u][c]=u+10;if(null!=(e=De("supercube"))&&"1"==e){Me=!0,Fe(.06);for(u=0;u<16;u++)z[0][u]=22;null!=(e=De("scw"))&&("1"==e?Le=1:"2"==e&&(Le=2)),1==Le&&(Z[10]="#000000")}if(null!=(e=De("gabbacolors"))&&"1"==e&&(1==Me?(Z[11]="#fdcf00",Z[12]="#fd4e0a",Z[13]="#93000d",Z[14]="#00702d",Z[15]="#00347a"):(Fe(.06),Z[11]="#ffd90a",Z[12]="#ff4f0b",Z[13]="#9e0b19",Z[14]="#0b7d39",Z[15]="#0b4186")),null!=(e=De("borderwidth"))){for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(ye=10*ye+parseInt(e[u]));ye>=0&&ye<=20&&Fe(ye/100)}if(Me)for(u=0;u<6;u++)for(c=0;c<16;c++)H[u][c]=0;var s="lluu";if(null!=(e=De("colorscheme"))&&6==e.length)for(u=0;u<6;u++){var h=23;for(c=0;c<23;c++)if(e[u].toLowerCase()=="0123456789wyorgbldmcpnk".charAt(c)){h=c;break}for(c=0;c<16;c++)z[u][c]=h}if("1"==(e=De("scramble"))?pe=1:"2"==e&&(pe=2),2==pe)for(u=0;u<6;u++)for(c=0;c<16;c++)G[u][c]=z[u][c],K[u][c]=H[u][c];if(0==pe){if(null!=(e=De("pos"))&&96==e.length){s="uuuuff","gray"==t&&(t="white");for(u=0;u<6;u++){var g=Ae[u];for(c=0;c<16;c++){var m=Re[u][c];z[g][m]=23;for(var b=0;b<14;b++)if(e.charAt(16*u+c)=="DFECABdfecabgh".charAt(b)){z[g][m]=b+4;break}}}}if(null!=(e=De("facelets"))&&96==e.length)for(u=0;u<6;u++)for(c=0;c<16;c++){z[u][c]=23;for(b=0;b<23;b++)if(e[16*u+c].toLowerCase()=="0123456789wyorgbldmcpnk".charAt(b)){z[u][c]=b;break}}if(null!=(e=De("superfacelets"))&&96==e.length)for(u=0;u<6;u++)for(c=0;c<16;c++)for(b=0;b<4;b++)if(e[16*u+c].toLowerCase()=="0123".charAt(b)){H[u][c]=b;break}}if(null!=(e=De("randmoves"))){var M=0;for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(M=10*M+parseInt(e[u]));M>0&&(ke=M)}if(("random"==(e=De("move"))||pe>0)&&(e=kn(4,ke)),ie=null==e?[]:xe(e,!0),I=0,X=-1,0==pe&&null!=(e=De("initmove"))){"random"==e&&(e=kn(4,ke));var L="#"==e?ie:xe(e,!1);L.length>0&&ze(z,L[0],0,L[0].length,!1)}if(e=De("initrevmove"),1==pe?e=null:2==pe&&(e="#"),null!=e){"random"==e&&(e=kn(4,ke));var y="#"==e?ie:xe(e,!1);y.length>0&&ze(z,y[0],0,y[0].length,!0)}0==pe&&null!=(e=De("demo"))&&("random"==e&&(e=kn(4,ke)),(ue="#"==e?ie:xe(e,!0)).length>0&&ue[0].length>0&&(T=!0)),e=De("position"),Rr(Br(ne,te,re)),null==e&&(e=s);var A=Math.PI/12;for(u=0;u<e.length;u++){var R=A;switch(e[u].toLowerCase()){case"d":R=-R;case"u":xr(te,R),xr(re,R);break;case"f":R=-R;case"b":Ir(te,R),Ir(re,R);break;case"l":R=-R;case"r":Er(te,R),Er(re,R)}}if(Rr(Br(ne,te,re)),v=0,d=0,null!=(e=De("speed")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(v=10*v+parseInt(e[u]));if(null!=(e=De("doublespeed")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(d=10*d+parseInt(e[u]));if(0==v&&(v=10),0==d&&(d=3*v/2),S=0,null==(e=De("perspective")))S=2;else for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(S=10*S+parseInt(e[u]));var x,U=0;if(null!=(e=De("scale")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(U=10*U+parseInt(e[u]));if(D=1/(1+U/10),B=!1,null!=(e=De("hint"))){B=!0,E=0;for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(E=10*E+parseInt(e[u]));E<1?B=!1:E/=10}(q=13,null!=(e=De("buttonheight")))&&((x=parseInt(e))>=9&x<=25&&(q=x));(ve=0==ie.length?0:6,Y=1,"0"==(e=De("buttonbar"))?(Y=0,q=0,ve=0):"1"==e?Y=1:"2"!=e&&0!=ie.length||(Y=2,ve=0),e=De("edit"),w="0"!=e,e=De("repeat"),p="0"!=e,e=De("clickprogress"),k="0"!=e,e=De("movetext"),Q="1"==e?1:0,null!=(e=De("textsize")))&&((x=parseInt(e))>=5&x<=40&&(de=x));if(e=De("fonttype"),ge=null==e||"1"==e,W=0,null!=(e=De("metric"))&&("1"==e?W=1:"2"==e?W=2:"3"==e&&(W=3)),F=1,null!=(e=De("align"))&&("0"==e?F=0:"1"==e?F=1:"2"==e&&(F=2)),null!=(e=De("ww"))&&"1"==e&&(me=!0),null!=(e=De("snap"))&&"1"==e&&(be=!0),2!=pe)for(u=0;u<6;u++)for(c=0;c<16;c++)G[u][c]=z[u][c],K[u][c]=H[u][c];for(u=0;u<3;u++)oe[u]=te[u],ae[u]=re[u],fe[u]=ne[u];Gr(t)<128?(n="white",r=function(e){"#"!=e.substring(0,1)&&(e=Hr(e));var t=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16);return t=Math.floor(1.3*t),r=Math.floor(1.3*r),n=Math.floor(1.3*n),Ur(t>255?255:t,r>255?255:r,n>255?255:n)}(t)):(n="black",r=Kr(t)),l=Gr(o)<128?"white":"black",a=n,null!=(e=De("slidercolor"))&&6==e.length&&Cr(e)&&(a="#"+e),f=Kr(t),null!=(e=De("sliderbgcolor"))&&6==e.length&&Cr(e)&&(f="#"+e),null!=(e=De("troughcolor"))&&6==e.length&&Cr(e)&&(f="#"+e),i="black",null!=(e=De("cubecolor"))&&6==e.length&&Cr(e)&&(i="#"+e),X=-1,fn=an.getContext("2d"),sn=q,hn=ve,vn=de,pn(),dn.appendChild(an),fr(),T&&Ke(-1)}function De(e){var t=Ln[e];return void 0===t?N[e]:t}function Fe(e){dr[0][0]=dr[0][1]=dr[1][1]=dr[3][0]=e,dr[1][0]=dr[2][0]=dr[2][1]=dr[3][1]=1-e}var Be=[0,0,0,0,0,0,1,1,1,3,3,3,3,3,3,2,2,2,2,2,2],Ee=[0,1,2,3,4,5,1,2,4,5,2,0,5,2,0,0,1,2,3,4,5];function xe(e,t){if(t){for(var r=e.indexOf("{");-1!=r;)0,r=e.indexOf("{",r+1);if(null==ce)X=0,ce=[];else{for(var n=[],o=0;o<ce.length;o++)n[o]=ce[o];X=ce.length,ce=n}}var a=1;for(r=e.indexOf(";");-1!=r;)a++,r=e.indexOf(";",r+1);var f=[],l=0;for(r=e.indexOf(";"),a=0;-1!=r;)f[a++]=Ue(e.substring(l,r),t),l=r+1,r=e.indexOf(";",l);return f[a]=Ue(e.substring(l),t),f}var Ie=["m","t","c","s","a","w"];function Ue(e,t){for(var r=0,n=[],o=0;o<e.length;o++)if("."==e.charAt(o))n[r]=-1,r++;else if("{"==e.charAt(o)){o++;for(var a="";o<e.length&&"}"!=e.charAt(o);)t&&(a+=e.charAt(o)),o++;t&&(ce[X]=a,n[r]=1e3+X,X++,r++)}else for(var f=0;f<21;f++)if(e.charAt(o)=="UDFBLRESMXYZxyzudfblr".charAt(f)){o++;var l=Be[f];if(n[r]=28*Ee[f],o<e.length&&0==Be[f])for(var i=0;i<Ie.length;i++)if(e.charAt(o)==Ie[i]){l=i+1,o++;break}n[r]+=4*l,o<e.length&&("1"==e.charAt(o)?o++:"'"==e.charAt(o)||"3"==e.charAt(o)?(n[r]+=2,o++):"2"==e.charAt(o)&&(++o<e.length&&"'"==e.charAt(o)?(n[r]+=3,o++):n[r]+=1)),r++,o--;break}var u=[];for(o=0;o<r;o++)u[o]=n[o];return u}function Pe(e,t,r){if(t>=e.length)return"";for(var n="",o=t;o<r;o++)n+=Xe(e,o);return n}var Ce=[[["U","D","F","B","L","R"],["Um","Dm","Fm","Bm","Lm","Rm"],["Ut","Dt","Ft","Bt","Lt","Rt"],["Uc","Dc","Fc","Bc","Lc","Rc"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["Uw","Dw","Fw","Bw","Lw","Rw"]],[["U","D","F","B","L","R"],["~E","E","S","~S","M","~M"],["u","d","f","b","l","r"],["Z","~Z","Y","~Y","~X","X"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["Uw","Dw","Fw","Bw","Lw","Rw"]],[["U","D","F","B","L","R"],["~E","E","S","~S","M","~M"],["u","d","f","b","l","r"],["Y","~Y","Z","~Z","~X","X"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["Uw","Dw","Fw","Bw","Lw","Rw"]],[["U","D","F","B","L","R"],["u","d","f","b","l","r"],["Uu","Dd","Ff","Bb","Ll","Rr"],["QU","QD","QF","QB","QL","QR"],["UD'","DU'","FB'","BF'","LR'","RL'"],["UD","DU","FB","BF","LR","RL"],["ud'","du'","fb'","bf'","lr'","rl'"]]],We=["","2","'","2'"];function Xe(e,t){if(t>=e.length)return"";if(e[t]>=1e3)return"";if(-1==e[t])return".";var r=Ce[Q-1][Math.floor(e[t]/4)%7][Math.floor(e[t]/28)];return"~"==r.charAt(0)?r.substring(1)+We[(e[t]+2)%4]:r+We[e[t]%4]}var Ye=["","q","h","s"];function qe(e){for(var t=0,r=0;r<e.length;r++)e[r]<1e3&&t++;return t}function Oe(e,t){for(var r=0,n=0;;){for(;r<e.length&&e[r]>=1e3;)r++;if(n==t)break;r<e.length&&(n++,r++)}return r}function Qe(e,t){for(var r=0,n=0;n<e.length&&(n<t||t<0);n++)r+=Ne(e[n]);return r}function Ne(e){if(e<0||e>=1e3)return 0;var t=e%4,r=Math.floor(e/4)%7,n=1;switch(W){case 1:1!=t&&3!=t||(n*=2);case 2:(1==r||r>3)&&(n*=2);case 3:3==r&&(n=0),3!=W||4!=r&&5!=r||(n*=2)}return n}function Ze(e){X=e.length>0&&e[0]>=1e3?e[0]-1e3:-1}function ze(e,t,r,n,o){for(var a=o?r+n:r;;){if(o){if(a<=r)break;a--}if(t[a]>=1e3)X=o?-1:t[a]-1e3;else if(t[a]>=0){var f=t[a]%4+1,l=Math.floor(t[a]/4)%7;4==f&&(f=2),o&&(f=4-f),ut(e,Math.floor(t[a]/28),f,l)}if(!o&&++a>=r+n)break}}var He=0,Ge=0;function Ke(e){if(je(),(T||0!=ie.length&&0!=ie[x].length)&&(!T||0!=ue.length&&0!=ue[0].length)){switch(U=1,P=!1,C=!0,e){case 0:break;case 1:U=-1;break;case 2:P=!0;break;case 3:U=-1,P=!0;break;case 4:C=!1}jr(He++,U)}}function je(){1==A&&(b=!0)}function Je(){I=0,ie.length>0&&Ze(ie[x]),le=!0,M=!1;for(var e=0;e<6;e++)for(var t=0;t<16;t++)z[e][t]=G[e][t],H[e][t]=K[e][t];pe>0&&(ie=xe(kn(4,ke),!1)),2==pe&&ze(z,ie[0],0,ie[0].length,!0);for(e=0;e<3;e++)te[e]=oe[e],re[e]=ae[e],ne[e]=fe[e]}var Ve=[[[0,4],[0,4]],[[0,4],[0,4]],[[0,4],[0,4]],[[0,4],[0,4]],[[0,4],[0,4]],[[0,4],[0,4]]],$e=[],_e=[],et=[],tt=[],rt=[[[0,0],[0,0]],[[0,4],[0,4]],[[0,4],[0,1]],[[0,1],[0,4]],[[0,4],[3,4]],[[3,4],[0,4]]],nt=[[1,0,3,3,2,3],[0,1,5,5,4,5],[2,3,1,0,3,2],[4,5,0,1,5,4],[3,2,2,4,1,0],[5,4,4,2,0,1]],ot=[[0,1,5,5,4,5],[1,0,3,3,2,3],[4,5,0,1,5,4],[2,3,1,0,3,2],[5,4,4,2,0,1],[3,2,2,4,1,0]],at=[[[0,0],[0,0]],[[0,4],[2,3]],[[0,4],[1,2]],[[2,3],[0,4]],[[1,2],[0,4]]],ft=[[0,0,4,4,2,4],[0,0,3,3,1,3],[2,4,0,0,4,2],[1,3,0,0,3,1],[4,2,2,1,0,0],[3,1,1,2,0,0]],lt=[[0,0,3,3,1,3],[0,0,4,4,2,4],[1,3,0,0,3,1],[2,4,0,0,4,2],[3,1,1,2,0,0],[4,2,2,1,0,0]];function it(e){for(var t=0;t<6;t++)$e[t]=rt[nt[e][t]],tt[t]=rt[ot[e][t]],_e[t]=at[ft[e][t]],et[t]=at[lt[e][t]];le=!1}function ut(e,t,r,n){switch(n){case 3:bt(e,t,4-r,!1),bt(e,t,4-r,!0),bt(e,1^t,r,!0),bt(e,1^t,r,!1);break;case 2:bt(e,t,4-r,!1);case 1:bt(e,t,4-r,!0);break;case 6:bt(e,t,4-r,!0),bt(e,1^t,r,!0);break;case 5:bt(e,1^t,4-r,!1),bt(e,t,4-r,!1);break;case 4:bt(e,1^t,r,!1);default:bt(e,t,4-r,!1)}}var ct=[0,1,2,3,7,11,15,14,13,12,8,4],st=[5,6,10,9],ht=[1,4,-1,-4,1,4,-1,-4],vt=[0,3,15,12,4,2,11,13],dt=[[3,3,3,0],[2,1,1,1],[3,3,0,0],[2,1,1,2],[3,2,0,0],[2,2,0,1]],gt=[[7,7,7,4],[6,5,5,5],[7,7,4,4],[6,5,5,6],[7,6,4,4],[6,6,4,5]],mt=[];function bt(e,t,r,n){Mt(e,t,r,n),1==Me&&r>0&&r<4&&(Mt(H,t,r,n),function(e,t,r){if(0==r)for(var n=0;n<16;n++)H[e][n]=(H[e][n]+4-t)%4;4==e&&(0==r&&(St(12,1,3),1==t?St(0,1,1):2==t?St(0,1,2):3==t&&St(0,4,0)),1==r&&(St(8,1,3),1==t?St(4,1,1):2==t?St(4,1,2):3==t&&St(1,4,0)));5==e&&(0==r&&(St(0,1,3),1==t?St(3,4,0):2==t?St(12,1,2):3==t&&St(12,1,1)),1==r&&(St(4,1,3),1==t?St(2,4,0):2==t?St(8,1,2):3==t&&St(8,1,1)));0==r&&(2==e&&Dt(0,4-t),3==e&&Dt(1,t));1==r&&(2==e&&Dt(2,4-t),3==e&&Dt(3,t))}(t,r,n))}function Mt(e,t,r,n){if(!n){for(var o=0;o<12;o++)mt[(o+3*r)%12]=e[t][ct[o]];for(o=0;o<12;o++)e[t][ct[o]]=mt[o];for(o=0;o<4;o++)mt[(o+r)%4]=e[t][st[o]];for(o=0;o<4;o++)e[t][st[o]]=mt[o]}var a=4*r;for(o=0;o<4;o++)for(var f=_[t][o],l=n?gt[t][o]:dt[t][o],i=ht[l],u=vt[l],c=0;c<4;c++,a++)mt[a%16]=e[f][c*i+u];for(o=0,a=0;o<4;o++)for(f=_[t][o],l=n?gt[t][o]:dt[t][o],i=ht[l],u=vt[l],c=0;c<4;c++,a++)e[f][c*i+u]=mt[a]}var wt,pt,kt,Lt,yt,At,Rt,Tt=[[[0,1,0],[0,4,1],[0,4,4],[0,1,5]],[[12,1,0],[3,4,1],[3,4,4],[12,1,5]],[[4,1,0],[1,4,1],[1,4,4],[4,1,5]],[[8,1,0],[2,4,1],[2,4,4],[8,1,5]]];function St(e,t,r){for(var n=e,o=0;o<4;n+=t,o++)H[r][n]=(H[r][n]+2)%4}function Dt(e,t){for(var r=0;r<4;r++)for(var n=Tt[e][r],o=n[0],a=0;a<4;o+=n[1],a++)H[n[2]][o]=(H[n[2]][o]+t)%4}var Ft,Bt,Et=[],xt=[],It=[],Ut=[],Pt=[[[0,0],[4,0],[4,1],[0,1]],[[4,0],[4,4],[3,4],[3,0]],[[4,4],[0,4],[0,3],[4,3]],[[0,4],[0,0],[1,0],[1,4]],[[0,1],[4,1],[4,2],[0,2]],[[3,0],[3,4],[2,4],[2,0]],[[0,2],[4,2],[4,3],[0,3]],[[2,0],[2,4],[1,4],[1,0]]],Ct=[[1,0],[0,1],[-1,0],[0,-1],[1,0],[0,1],[-1,0],[0,-1]],Wt=[[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,-1,1,-1,1,-1,1,-1],[1,-1,1,-1,1,-1,1,-1],[-1,1,-1,1,-1,1,-1,1],[1,-1,1,-1,1,-1,1,-1]],Xt=[],Yt=[],qt=[[[1,0,0],[0,0,0],[0,0,1]],[[1,0,0],[0,1,0],[0,0,0]],[[0,0,0],[0,1,0],[0,0,1]]],Ot=[[[0,0,1],[0,0,0],[-1,0,0]],[[0,1,0],[-1,0,0],[0,0,0]],[[0,0,0],[0,0,1],[0,-1,0]]],Qt=[[[0,0,0],[0,1,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,1]],[[1,0,0],[0,0,0],[0,0,0]]],Nt=[1,-1,1,-1,1,-1],Zt=[],zt=[],Ht=[],Gt=[],Kt=[],jt=[],Jt=[],Vt=[],$t=[],_t=[],er=[],tr=[],rr=[[1,0,0,0],[0,1,0,0],[1,1,0,0],[1,1,1,1],[1,0,0,1],[1,0,0,2],[0,1,1,0]],nr=[],or=[[0,2,2,2],[2,1,2,2],[2,2,2,2],[2,2,2,2],[0,2,2,0],[0,2,2,0],[0,2,2,0]],ar=[[0,1,2,3],[3,2,1,0],[0,3,2,1]];function fr(){if(fn.save(),fn.fillStyle=t,1!=Y||0!=ve&&!T?(Wr(fn,0,0,wt,pt),fn.fillRect(0,0,wt,pt)):(Wr(fn,0,0,wt,pt-ln),fn.fillRect(0,0,wt,pt-ln)),Rt=0,le)br(te,re,ne,Ve,3,9);else{for(var e=Math.cos(h+s),n=Math.sin(h+s)*Nt[u],i=0;i<3;i++){Zt[i]=0,zt[i]=0;for(var v=0;v<3;v++){var d=Math.floor(u/2);Zt[i]+=te[v]*(Qt[d][i][v]+qt[d][i][v]*e+Ot[d][i][v]*n),zt[i]+=re[v]*(Qt[d][i][v]+qt[d][i][v]*e+Ot[d][i][v]*n)}}Br(Ht,Zt,zt);var g=Math.cos(h-s),m=Math.sin(h-s)*Nt[u];for(i=0;i<3;i++){Gt[i]=0,Kt[i]=0;for(v=0;v<3;v++){d=Math.floor(u/2);Gt[i]+=te[v]*(Qt[d][i][v]+qt[d][i][v]*g+Ot[d][i][v]*m),Kt[i]+=re[v]*(Qt[d][i][v]+qt[d][i][v]*g+Ot[d][i][v]*m)}}Br(jt,Gt,Kt),_t[0]=te,er[0]=re,tr[0]=ne,_t[1]=Zt,er[1]=zt,tr[1]=Ht,_t[2]=Gt,er[2]=Kt,tr[2]=jt,nr[0]=$e,nr[1]=_e,nr[2]=et,nr[3]=tt,Fr(Tr(Ar(Jt,te),5+S),Tr(Ar($t,j[u]),.4)),Fr(Tr(Ar(Vt,te),5+S),Tr(Ar($t,j[1^u]),1/6));var b,M=Sr(Jt,j[u]),w=Sr(Vt,j[1^u]);b=M<0&&w>0?0:M>0&&w<0?1:2,br(_t[rr[c][ar[b][0]]],er[rr[c][ar[b][0]]],tr[rr[c][ar[b][0]]],nr[ar[b][0]],or[c][ar[b][0]],0),br(_t[rr[c][ar[b][1]]],er[rr[c][ar[b][1]]],tr[rr[c][ar[b][1]]],nr[ar[b][1]],or[c][ar[b][1]],1),br(_t[rr[c][ar[b][2]]],er[rr[c][ar[b][2]]],tr[rr[c][ar[b][2]]],nr[ar[b][2]],or[c][ar[b][2]],2),br(_t[rr[c][ar[b][3]]],er[rr[c][ar[b][3]]],tr[rr[c][ar[b][3]]],nr[ar[b][3]],or[c][ar[b][3]],3)}if(O||A||(he=-1),!(pe>0&&2==Y)){if(!T&&ie.length>0){if(ie[x].length>0){if(ve>0){fn.lineWidth=cn,fn.strokeStyle=l;var p=(wt-2)*function(e,t){for(var r=0,n=0;n<t;n++)e[n]<1e3&&r++;return r}(ie[x],I)/qe(ie[x]);fn.fillStyle=f,fn.fillRect(un,pt-ve-un,wt-ln,ve),fn.fillStyle=a,fn.fillRect(un,pt-ve-un,p,ve),fn.beginPath(),fn.rect(un,pt-ve-un,wt-ln,ve),fn.stroke()}var k=Qe(ie[x],I)+"/"+Qe(ie[x],-1)+Ye[W];fn.font="bold "+de+"px helvetica";var L=fn.measureText(k).width,y=wt-L-2,R=pt-ve-Math.floor(3*ln);Q>0?(kr(fn,k,ge?y-ln:y,R-de),function(e,t){var n=0==I?Oe(ie[x],I):I,o=Pe(ie[x],0,n),a=Xe(ie[x],n),f=Pe(ie[x],n+1,ie[x].length),l=e.measureText(o).width,i=e.measureText(a).width,u=e.measureText(f).width,c=1;c+l+i+u>wt&&(c=Math.min(1,wt/2-l-i/2),c=Math.max(c,wt-l-i-u-2));i>0&&(e.fillStyle=r,e.lineWidth=2,e.strokeStyle="black",e.beginPath(),vn<=14?e.fillRect(c+l-1,pt-ve-de-Math.floor(4*ln),i+2,de+Math.floor(3*ln)):e.fillRect(c+l-1,pt-ve-de-Math.floor(2*ln),i+2,de+Math.floor(ln)));l>0&&kr(e,o,c,t);i>0&&kr(e,a,c+l,t);u>0&&kr(e,f,c+l+i,t)}(fn,R)):kr(fn,k,ge?y-ln:y,R)}if(ie.length>1){k=x+1+"/"+ie.length,L=fn.measureText(k).width,y=wt-L-q-Math.floor(5*ln);kr(fn,k,y,lr()),Or(fn,7,wt-q/2,q/2)}}X>=0&&(fn.font="bold "+de+"px helvetica",kr(fn,ce[X],ge?ln:0,lr()))}fn.restore(),se&&0!=Y&&function(e){var t=q%2==0?1:0;if(t+=Math.floor(ln+.5)-1,2==Y)return e.fillStyle=0==he||pe>0&&6==he?Kr(o):o,e.fillRect(un,pt-q,q,q),e.lineWidth=cn,e.strokeStyle=l,e.beginPath(),e.rect(un,pt-q-un,q,q),e.stroke(),void Or(e,0,q/2,pt-(q+1)/2-t);if(1==Y){for(var r=0,n=0;n<7;n++){var a=Math.floor((wt-r)/(7-n));e.fillStyle=he==n?Kr(o):o,e.fillRect(r,pt,a,q),e.lineWidth=cn,e.strokeStyle=l,e.beginPath(),0==n?e.rect(r+un,pt-un,a-ln,q):e.rect(r-un,pt-un,a,q),e.stroke(),e.strokeStyle="black",Or(e,n,r+a/2,pt+q/2-t),r+=a}se=!1}}(fn)}function lr(){return vn<10?Math.floor(10*ln):vn<12?Math.floor(12*ln):vn<14?Math.floor(14*ln):de}var ir=[],ur=[],cr=[],sr=[],hr=[[],[],[],[],[],[]],vr=[[],[],[],[],[],[]],dr=[[.1,.1],[.9,.1],[.9,.9],[.1,.9]],gr=[[0,0],[0,1],[1,1],[1,0]],mr=[];function br(e,t,r,n,o,a){for(var f=0;f<8;f++){var l=(v=wt<pt?wt:pt-ve)/3.7*Sr(J[f],t)*D,s=v/3.7*Sr(J[f],r)*D;l/=1-(d=v/(5+S)*Sr(J[f],e)*D)/v,s/=1-d/v,cr[f]=wt/2+l,sr[f]=0==F?(pt-ve)/2*D-s:2==F?pt-ve-(pt-ve)/2*D-s:(pt-ve)/2-s}for(f=0;f<6;f++)for(var h=0;h<4;h++)hr[f][h]=cr[V[f][h]],vr[f][h]=sr[V[f][h]];if(B)for(f=0;f<6;f++)if(Fr(Tr(Ar(Jt,e),5+S),j[f]),Sr(Jt,j[f])<0){Tr(Ar(mr,j[f]),E);var v,d;l=(v=wt<pt?wt:pt-ve)/3.7*Sr(mr,t),s=v/3.7*Sr(mr,r);l/=1-(d=v/(5+S)*Sr(mr,e))/v,s/=1-d/v;var g=n[f][0][1]-n[f][0][0],m=n[f][1][1]-n[f][1][0];if(g>0&&m>0)for(var b=0,p=n[f][1][0];b<m;b++,p++)for(var k=0,L=n[f][0][0];k<g;k++,L++){for(h=0;h<4;h++)Mr(f,h,ir,ur,L+dr[h][0],p+dr[h][1],M),ir[h]=Math.floor(ir[h]+(M?-l:l)),ur[h]=Math.floor(ur[h]-s);1==Me?(Zr(fn,ir,ur,"#fdfdfd"),zr(fn,ir,ur,f,H[f][4*p+L],Z[z[f][4*p+L]])):Zr(fn,ir,ur,Z[z[f][4*p+L]])}}for(f=0;f<6;f++){g=n[f][0][1]-n[f][0][0],m=n[f][1][1]-n[f][1][0];if(g<=0||m<=0){var y=0;if(0==o&&0==a?y=.75:1==o&&1==a?y=.5:1==o&&2==a&&u==f?y=.25:2==o&&0==a&&(y=0==c?.25:u==f?.5:.75),2==o&&c>3&&(y=.5),0!=y){for(h=0;h<4;h++){var R=$[f][h];ir[h]=Math.floor(hr[f][h]+(hr[1^f][R]-hr[f][h])*y),ur[h]=Math.floor(vr[f][h]+(vr[1^f][R]-vr[f][h])*y),M&&(ir[h]=wt-ir[h])}Zr(fn,ir,ur,i)}}else{for(h=0;h<4;h++)Mr(f,h,ir,ur,n[f][0][gr[h][0]],n[f][1][gr[h][1]],M);a<3?Zr(fn,ir,ur,i):(Fr(Tr(Ar(Jt,e),5+S),j[f]),Sr(Jt,j[f])>0&&Zr(fn,ir,ur,i))}}for(f=0;f<6;f++)if(Fr(Tr(Ar(Jt,e),5+S),j[f]),Sr(Jt,j[f])>0){g=n[f][0][1]-n[f][0][0],m=n[f][1][1]-n[f][1][0];if(g>0&&m>0)for(b=0,p=n[f][1][0];b<m;b++,p++)for(k=0,L=n[f][0][0];k<g;k++,L++){for(h=0;h<4;h++)Mr(f,h,ir,ur,L+dr[h][0],p+dr[h][1],M);1==Me?(Zr(fn,ir,ur,"#fdfdfd"),zr(fn,ir,ur,f,H[f][4*p+L],Z[z[f][4*p+L]])):Zr(fn,ir,ur,Z[z[f][4*p+L]])}if(!w||A)continue;var T=(hr[f][1]-hr[f][0]+hr[f][2]-hr[f][3])/6,x=(hr[f][3]-hr[f][0]+hr[f][2]-hr[f][1])/6,I=(vr[f][1]-vr[f][0]+vr[f][2]-vr[f][3])/6,U=(vr[f][3]-vr[f][0]+vr[f][2]-vr[f][1])/6;if(3==o)for(h=0;h<8;h++){for(R=0;R<4;R++)Mr(f,R,Et[Rt],xt[Rt],Pt[h][R][0],Pt[h][R][1],!1);if(It[Rt]=(T*Ct[h][0]+I*Ct[h][1])*Wt[f][h],Ut[Rt]=(x*Ct[h][0]+U*Ct[h][1])*Wt[f][h],Xt[Rt]=_[f][h%4],Yt[Rt]=Math.floor(h/4),24==++Rt)break}else if(0==o){if(f!=u&&g>0&&m>0){for(h=4==g?0==n[f][1][0]?0:2:0==n[f][0][0]?3:1,R=0;R<4;R++)Mr(f,R,Et[Rt],xt[Rt],Pt[h][R][0],Pt[h][R][1],!1);It[Rt]=(T*Ct[h][0]+I*Ct[h][1])*Wt[f][h],Ut[Rt]=(x*Ct[h][0]+U*Ct[h][1])*Wt[f][h],Xt[Rt]=u,Yt[Rt]=0,Rt++}}else if(1==o&&f!=u&&g>0&&m>0){h=4==g?1==n[f][1][0]?0:2:1==n[f][0][0]?3:1;h+=4;for(R=0;R<4;R++)Mr(f,R,Et[Rt],xt[Rt],Pt[h][R][0],Pt[h][R][1],!1);It[Rt]=(T*Ct[h][0]+I*Ct[h][1])*Wt[f][h],Ut[Rt]=(x*Ct[h][0]+U*Ct[h][1])*Wt[f][h],Xt[Rt]=u,Yt[Rt]=1,Rt++}}}function Mr(e,t,r,n,o,a,f){o/=4,a/=4;var l=hr[e][0]+(hr[e][1]-hr[e][0])*o,i=vr[e][0]+(vr[e][1]-vr[e][0])*o,u=hr[e][3]+(hr[e][2]-hr[e][3])*o,c=vr[e][3]+(vr[e][2]-vr[e][3])*o;r[t]=Math.floor(.5+l+(u-l)*a),n[t]=Math.floor(.5+i+(c-i)*a),f&&(r[t]=wt-r[t])}var wr=[1,1,-1,-1,-1,1,1,-1,-1,0,1,0,0,1,0,-1],pr=[];function kr(e,t,r,o){if(ge){e.fillStyle="black";for(var a=0;a<pr.length;a+=2)e.fillText(t,r+pr[a],o+pr[a+1]);e.fillStyle="white"}else e.fillStyle=n;e.fillText(t,r,o)}var Lr=[-1,3,1,-1,0,2,4,-1],yr=[];function Ar(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Rr(e){var t=Math.sqrt(Sr(e,e));return e[0]/=t,e[1]/=t,e[2]/=t,e}function Tr(e,t){return e[0]*=t,e[1]*=t,e[2]*=t,e}function Sr(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Dr(e,t){return e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e}function Fr(e,t){return e[0]-=t[0],e[1]-=t[1],e[2]-=t[2],e}function Br(e,t,r){return e[0]=t[1]*r[2]-t[2]*r[1],e[1]=t[2]*r[0]-t[0]*r[2],e[2]=t[0]*r[1]-t[1]*r[0],e}function Er(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[1]*n-e[2]*r,a=e[1]*r+e[2]*n;return e[1]=o,e[2]=a,e}function xr(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[0]*n-e[2]*r,a=e[0]*r+e[2]*n;return e[0]=o,e[2]=a,e}function Ir(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[0]*n-e[1]*r,a=e[0]*r+e[1]*n;return e[0]=o,e[1]=a,e}function Ur(e,t,r){return"#"+Pr(e.toString(16))+Pr(t.toString(16))+Pr(r.toString(16))}function Pr(e){return("00"+e).substring(e.length)}function Cr(e){for(var t=0,r=0;r<6;r++)for(var n=0;n<16;n++)if(e[r].toLowerCase()=="0123456789abcdef".charAt(n)){t++;break}return 6==t}function Wr(e,t,r,n,o){e.beginPath(),e.moveTo(t,r),e.lineTo(t+n,r),e.lineTo(t+n,r+o),e.lineTo(t,r+o),e.lineTo(t,r),e.closePath(),e.clip()}var Xr,Yr,qr=[];function Or(e,t,r,n){switch(r=Math.floor(r),n=Math.floor(n),t){case 0:Nr(e,r-qr[4],n-qr[3],qr[3],qr[6]+1),Qr(e,r+qr[4],n,-1);break;case 1:Nr(e,r+qr[1],n-qr[3],qr[3],qr[6]+1),Qr(e,r-qr[1],n,-1);break;case 2:Qr(e,r+qr[1],n,-1);break;case 3:A?Nr(e,r-qr[4],n-qr[3],qr[7],qr[7]):(Nr(e,r-qr[4],n-qr[2],qr[7],qr[5]),Nr(e,r-qr[2],n-qr[4],qr[3],qr[9]));break;case 4:Qr(e,r-qr[2],n,1);break;case 5:Nr(e,r-qr[4],n-qr[3],qr[3],qr[6]+1),Qr(e,r,n,1);break;case 6:Nr(e,r+qr[1],n-qr[3],qr[3],qr[6]+1),Qr(e,r-qr[4],n,1);break;case 7:e.fillStyle=7==he?Kr(o):o,e.fillRect(wt-q-qr[1]-un,qr[1]+un,q,q),e.lineWidth=cn,e.strokeStyle=l,e.beginPath(),ln%2==0?e.rect(wt-q-qr[1],qr[1],q,q):e.rect(wt-q-qr[1]-un,qr[1]+un,q,q),e.stroke(),Qr(e,r-qr[3],n+qr[1],1)}}function Qr(e,t,r,n){var o=3*ln,a=[],f=[];a[0]=t,a[1]=t+n,a[2]=t+4*ln*n,a[3]=t+n,a[4]=t,f[0]=r-o,f[1]=r-o,f[2]=r,f[3]=r+o,f[4]=r+o,function(e,t,r){e.beginPath(),e.moveTo(t[0]+un,r[0]+un);for(var n=1;n<5;n++)e.lineTo(t[n]+un,r[n]+un);e.closePath(),e.fillStyle="white",e.strokeStyle="black",e.fill(),e.lineWidth=cn,e.stroke()}(e,a,f)}function Nr(e,t,r,n,o){e.lineWidth=cn,e.beginPath(),e.rect(t+un,r+un,n-1,o-1),e.fillStyle="white",e.fill(),e.strokeStyle="black",e.stroke()}function Zr(e,t,r,n){e.beginPath(),e.moveTo(t[0],r[0]),e.lineTo(t[1],r[1]),e.lineTo(t[2],r[2]),e.lineTo(t[3],r[3]),e.closePath(),e.fillStyle=n,e.strokeStyle=n,e.fill(),e.lineWidth=.7,e.stroke()}function zr(e,t,r,n,o,a){var f=[],l=[],i=[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]];if(2!=Le||"#ffffff"!=a){for(var u=0;u<4;u++)f[u]=Math.floor(t[u]+.05*(t[i[2][u]]-t[u])),l[u]=Math.floor(r[u]+.05*(r[i[2][u]]-r[u]));0==n&&(o=(o+1)%4),4==n&&(o=(o+3)%4);var c=i[o][0],s=i[o][1],h=i[o][2],v=i[o][3],d=.26*(f[h]-f[s]),g=.26*(l[h]-l[s]),m=(f[c]-f[s])/2,b=l[s]+(l[c]-l[s])/2,M=l[h]+(l[v]-l[h])/2,w=(f[v]-f[h])/2,p=1^o;e.fillStyle=a,e.beginPath(),e.moveTo(f[c]+(f[v]-f[c])/2,l[c]+(l[v]-l[c])/2),e.lineTo(f[p]+m,b),e.lineTo(f[p]+d+m,b+g),e.lineTo(f[p]+d,l[p]+g),p=(p+1)%4,e.lineTo(f[p]-d,l[p]-g),e.lineTo(f[p]-d+w,M-g),e.lineTo(f[p]+w,M),e.closePath(),e.fill(),e.lineWidth=.6*ln,e.strokeStyle="black",e.stroke()}}function Hr(e){return"white"==e?"#FFFFFF":"black"==e?"#000000":"#808080"}function Gr(e){return"#"!=e.substring(0,1)&&(e=Hr(e)),(299*parseInt(e.substring(1,3),16)+587*parseInt(e.substring(3,5),16)+114*parseInt(e.substring(5,7),16))/1e3}function Kr(e){"#"!=e.substring(0,1)&&(e=Hr(e));var t=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16);return Ur(t=Math.floor(.7*t),r=Math.floor(.7*r),n=Math.floor(.7*n))}function jr(e,t){if(e>Ge)setTimeout(jr,0,e,t);else{if(!C){for(var r=ie[x];I<r.length;){if(r[I]>=1e3)X=r[I]-1e3;else if(-1!=r[I]){var n=r[I]%4+1,o=Math.floor(r[I]/4)%7,a=Math.floor(r[I]/28);ut(z,a,4==n?2:n,o)}I++}return A=!1,se=!0,fr(),void Ge++}var f,l,i,g,M,w,k=t;m=!1,requestAnimationFrame(function e(){if(S){if(S=!1,w=!1,p)k>0?I>=r.length&&(I=0,Ze(r)):(X=-1,0==I&&(I=r.length));else if(k>0&&I>=r.length||k<0&&0==I)return b=!1,A=!1,Ge++,se=!0,void fr();A=!0,se=!0}if(D&&(D=!1,k<0&&(E=!1,0==I?(E=!0,B=!0):I--),!E)){if(R=!1,-1==r[I]){if(fr(),!P)for(f=Date.now();Date.now()-f<1e3;);}else r[I]>=1e3?X=k>0?r[I]-1e3:-1:R=!0;if(R){n=r[I]%4+1,o=Math.floor(r[I]/4)%7;var t=n<3;if(4==n&&(n=2),k<0&&(t=!t,n=4-n),a=Math.floor(r[I]/28),L=!1,le=!0,y=!0,h=0,ee[a]>0&&(t=!t),C){M=Math.PI/2,g=t?1:-1;var x=67*v;2==n&&(M=Math.PI,x=67*d),L=!0,u=a,c=o,it(a),f=Date.now(),l=f,i=g*M/x,s=0}}else F=!0}if(!E&&(R&&(C?s*g<M?(fr(),(m||b)&&(F=!0),l=Date.now(),s=i*(l-f)):(F=!0,me&&!P&&(s-=g*M,fr(),I>0&&I<r.length-1&&(F=!1,I+=k,f=l,l=Date.now(),s=i*(l-f)))):F=!0),F)){if(F=!1,D=!0,R&&(s=0,L=!1,le=!0,ut(z,a,n,o),y=!1,C&&fr(),P&&(w=!0)),k>0){if(++I<r.length&&r[I]>=1e3&&(X=r[I]-1e3,I++),I==r.length)if(T){I=0,Ze(r);for(var U=0;U<6;U++)for(var W=0;W<16;W++)z[U][W]=G[U][W],H[U][W]=K[U][W]}else B=!0}else X=-1;(m||b||w)&&(B=!0)}if(B)return B=!1,S=!0,He<=Ge+1&&(A=!1),se=!0,0==he&&Je(),fr(),T&&(Je(),T=!1),b=!1,void Ge++;requestAnimationFrame(e)});var R=!1,S=!0,D=!0,F=!1,B=!1,E=!1;r=T?ue[0]:ie[x]}}document.addEventListener("touchstart",rn),document.addEventListener("touchmove",gn),document.addEventListener("touchend",tn),document.addEventListener("mousedown",rn),document.addEventListener("mousemove",gn),document.addEventListener("mouseup",tn),document.addEventListener("contextmenu",Mn);var Jr=!1,Vr=!0,$r=document.getElementsByTagName("div"),_r=$r.length>0&&"wrap"==$r[0].className;function en(e){_r?$r[0].style.overflow=e:document.body.style.overflow=e}function tn(e){if(Jr&&void 0!==e.touches&&(e.preventDefault(),en("auto")),Jr?setTimeout(function(){Vr=!0},100):Vr=!0,Jr=!1,R=!1,O)O=!1,se=!0,fr();else if(L&&!y){L=!1,h+=s,s=0;for(var t=h;t<0;)t+=32*Math.PI;var r=Math.floor(8*t/Math.PI)%16;(be||r%4==0||r%4==3)&&(r=Math.floor((r+2)/4),ee[u]>0&&(r=(4-r)%4),h=0,le=!0,ut(z,u,r,c)),fr()}}function rn(e){var t=an.getBoundingClientRect(),r=Math.floor(t.left),n=Math.floor(t.top);if(void 0===e.touches)var o=e.clientX,a=e.clientY;else o=e.touches[0].clientX,a=e.touches[0].clientY;o<r||o>r+wt/ln||a<n||a>n+(pt+q)/ln||(e.preventDefault(),Jr=!0,Vr=!1,void 0!==e.touches&&(e.preventDefault(),en("hidden")),Xr=r,Yr=n,yt=kt=mn(e),At=Lt=bn(e),g=!1,(he=function(e,t){if(0==Y)return-1;if(ie.length>1&&e>=wt-q&&e<wt&&t>=0&&t<q)return 7;if(2==Y)return e>=0&&e<q&&t>=pt-q&&t<pt?0:-1;if(t<pt)return-1;for(var r=0,n=0;n<7;n++){var o=(wt-r)/(7-n);if(e>=r&&e<r+o&&t>=pt&&t<pt+q)return n;r+=o}return-1}(kt,Lt))>=0?(O=!0,3==he?A?je():M=!M:0==he?pe>0&&2==Y?1==we?(we=!1,je(),Je()):(we=!0,Ke(Lr[he=6])):(je(),Je()):7==he?(je(),setTimeout(Je,10),x=x<ie.length-1?x+1:0):Ke(Lr[he]),se=!0,fr()):ve>0&&ie.length>0&&ie[x].length>0&&Lt>pt-ve&&Lt<=pt?k&&(je(),nn(He++)):(M&&(yt=kt=wt-kt),void 0===e.touches?!w||A||0!=e.button||e.shiftKey||(g=!0):w&&!A&&(g=!0)))}function nn(e){if(e>Ge)setTimeout(nn,0,e);else{var t=qe(ie[x]),r=Math.floor(((kt-1)*t*2/(wt-2)+1)/2);(r=Math.max(0,Math.min(t,r)))>0&&(r=Oe(ie[x],r)),r>I&&ze(z,ie[x],I,r-I,!1),r<I&&ze(z,ie[x],r,I-r,!0),I=r,R=!0,fr(),A=!1,Ge++}}var on,an,fn,ln,un,cn,sn,hn,vn,dn;yr=[];function gn(e){if(Jr&&!O){if(R){je();var t=qe(ie[x]),r=Math.floor(((mn(e)-1)*t*2/(wt-2)+1)/2);return(r=Math.max(0,Math.min(t,r)))>0&&(r=Oe(ie[x],r)),r>I&&ze(z,ie[x],I,r-I,!1),r<I&&ze(z,ie[x],r,I-r,!0),I=r,void fr()}var n=M?wt-mn(e):mn(e),o=bn(e),a=n-kt,f=o-Lt;if(w&&g&&!L&&!A){yt=n,At=o;for(var l=0;l<Rt;l++){var i=Et[l][0],h=Et[l][1]-i,v=Et[l][3]-i,d=xt[l][0],m=xt[l][1]-d,b=xt[l][3]-d,p=(b*(kt-i)-v*(Lt-d))/(h*b-v*m),k=(-m*(kt-i)+h*(Lt-d))/(h*b-v*m);if(p>0&&p<1&&k>0&&k<1){if(a*a+f*f<144)return;if(Ft=It[l],Bt=Ut[l],Math.abs(Ft*a+Bt*f)/Math.sqrt((Ft*Ft+Bt*Bt)*(a*a+f*f))>.75){L=!0,u=Xt[l],c=Yt[l];break}}}g=!1,kt=yt,Lt=At}a=(n-kt)/ln,f=(o-Lt)/ln,!L||A?(Rr(Dr(te,Tr(Ar(yr,re),-.016*a))),Rr(Br(re,ne,te)),Rr(Dr(te,Tr(Ar(yr,ne),.016*f))),Rr(Br(ne,te,re)),kt=n,Lt=o):(le&&it(u),s=.03*(Ft*a+Bt*f)/Math.sqrt(Ft*Ft+Bt*Bt)),fr()}}function mn(e){return void 0===e.touches?(e.clientX-Xr)*ln:(e.touches[0].clientX-Xr)*ln}function bn(e){return void 0===e.touches?(e.clientY-Yr)*ln:(e.touches[0].clientY-Yr)*ln}function Mn(e){Vr||e.preventDefault()}function wn(){clearTimeout(on),on=setTimeout(function(){pn(),se=!0,fr()},20)}function pn(){pt=dn.clientHeight-1,wt=dn.clientWidth-1,an.style.width=wt+"px",an.style.height=pt+"px",ln=devicePixelRatio,un=ln/2,pt=Math.floor(pt*ln),wt=Math.floor(wt*ln),an.width=wt,an.height=pt,cn=ln,q=Math.floor(sn*ln),ve=Math.floor(hn*ln),de=Math.floor(vn*ln);for(var e=1;e<10;e++)qr[e]=e*ln;for(e=0;e<wr.length;e++)pr[e]=wr[e]*ln;1==Y&&(pt-=q)}function kn(e,t){var r,n,o=["R","L","F","B","U","D"],a=["","m","n"],f=["","2","'"],l=-1,i=-1,u=-1,c="";0==t&&(t=10*e);for(var s=0;s<t;s++){for(;l==i||Math.floor(l/2)==Math.floor(i/2)&&l==u;)l=Math.floor(6*Math.random());u=i,i=l,r=Math.floor(3*Math.random()),e<=3?c+=""+o[l]+f[r]+" ":(n=Math.floor(Math.random()*(e>4?3:2)),5==e&&1==n&&(n=0),c+=""+o[l]+a[n]+f[r]+" ")}return c}window.addEventListener("resize",wn);var Ln=[];function yn(){document.removeEventListener("mousedown",rn),document.removeEventListener("touchstart",rn),document.removeEventListener("touchmove",gn),document.removeEventListener("touchend",tn),document.removeEventListener("mousedown",rn),document.removeEventListener("mousemove",gn),document.removeEventListener("mouseup",tn),document.removeEventListener("contextmenu",Mn),window.removeEventListener("resize",wn)}!function(){an=document.createElement("canvas"),void 0!==e&&function(){for(var t=e.split("&"),r=0;r<t.length;r++){var n=t[r].split("=");void 0!==n[1]&&(Ln[n[0]]=decodeURIComponent(n[1].trim()))}}();var t=De("id");if(null!=t)(dn=document.getElementById(t)).innerHTML="";else if(null!=document.currentScript)dn=document.currentScript.parentNode;else{var r=document.getElementsByTagName("script"),n=r[r.length-1];dn=n.parentNode}null!=dn.id&&"undefined"!=typeof removeListeners&&(removeListeners[dn.id]=yn);for(var o=0;o<6;o++)z[o]=[],H[o]=[],G[o]=[],K[o]=[];for(o=0;o<24;o++)Et[o]=[],xt[o]=[];x=0,h=0,Te()}()}